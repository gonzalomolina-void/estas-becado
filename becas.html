<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>¿A qué Becas puedo aplicar? - ¿Estás Becado?</title>
  <link rel="apple-touch-icon" sizes="180x180" href="images/apple-touch-icon.png">
  <link rel="icon" type="image/png" sizes="32x32" href="images/favicon-32x32.png">
  <link rel="icon" type="image/png" sizes="16x16" href="images/favicon-16x16.png">
  <link rel="manifest" href="images/site.webmanifest">
  <link rel="shortcut icon" href="images/favicon.ico">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&family=Poppins:wght@400;600&display=swap"
    rel="stylesheet">
  <script src="https://unpkg.com/lucide@latest"></script>
  <link rel="stylesheet" href="styles.css">
</head>

<body>
  <header>
    <a href="index.html" class="logo">
      <img src="images/logo.png" alt="¿Estás Becado?" class="logo-img">
      ¿Estás <span>Becado?</span>
    </a>
    <button class="hamburger" id="hamburger-button" aria-label="menu" aria-expanded="false">
        <i data-lucide="menu"></i>
    </button>
  </header>

  <nav id="nav-menu">
    <a href="index.html">Inicio</a>
    <a href="becas.html" class="active">¿A qué Becas puedo aplicar?</a>
    <a href="busqueda.html">Estado de Becas</a>
    <div class="nav-right">
      <a href="#">Registro</a>
      <a href="#">Inicio de sesión</a>
      <button class="theme-toggle" onclick="toggleTheme()">
        <i data-lucide="moon"></i>
      </button>
    </div>
  </nav>

  <main>
    <div class="content-wrapper">
      <aside class="right-section">
        <div class="calificacion-section">
          <h3>¿A que becas califico?</h3>
          <form id="calificacion-form">
            <div class="form-grid">
              <div class="form-group">
                <label for="edad">Edad</label>
                <input type="number" id="edad" name="edad" value="22" min="0" max="120">
              </div>
              <div class="form-group">
                <label for="nivel">Nivel de estudios</label>
                <select id="nivel" name="nivel">
                  <option value="">Seleccione una opción</option>
                  <option value="secundaria">Secundaria</option>
                  <option value="licenciatura" selected>Licenciatura</option>
                  <option value="posgrado">Posgrado</option>
                  <option value="doctorado">Doctorado</option>
                </select>
              </div>
              <div class="form-group">
                <label for="provincia">Provincia</label>
                <select id="provincia" name="provincia">
                  <option value="">Seleccione una opción</option>
                  <option value="ba">Buenos Aires</option>
                  <option value="cordoba">Córdoba</option>
                </select>
              </div>
              <div class="form-group">
                <label for="institucion">Institución de estudio<span id="institucion-loader" class="mini-loader hidden"></span></label>
                <select id="institucion" name="institucion">
                  <option value="">Seleccione una opción</option>
                  <option value="unc">Universidad Nacional de Córdoba</option>
                </select>
              </div>
              <div class="form-group">
                <label for="tipo">Tipo de beca buscada<span id="tipo-loader" class="mini-loader hidden"></span></label>
                <select id="tipo" name="tipo">
                  <option value="">Seleccione una opción</option>
                  <option value="nacional">Nacional</option>
                </select>
              </div>
              <div class="form-group">
                <label for="campo">Campo de estudio o interés<span id="campo-loader" class="mini-loader hidden"></span></label>
                <select id="campo" name="campo">
                  <option value="">Seleccione una opción</option>
                  <option value="ingenieria">Ingeniería</option>
                </select>
              </div>
            </div>
            <button type="submit" class="btn">Buscar</button>
          </form>
        </div>
      </aside>
      <section class="left-section">
        <h2>Becas disponibles</h2>
        <div class="loader-container hidden">
          <div class="loader"></div>
        </div>
        <div class="becas-grid">
          <div class="beca-card">
            <div class="beca-logo">Logo Beca</div>
            <div class="beca-name">Becas doctorales CONICET</div>
          </div>
          <div class="beca-card">
            <div class="beca-logo">Logo Beca</div>
            <div class="beca-name">Becas Fondo Único UNC</div>
          </div>
          <div class="beca-card">
            <div class="beca-logo">Logo Beca</div>
            <div class="beca-name">Becas nivel superior CABA</div>
          </div>
          <div class="beca-card">
            <div class="beca-logo">Logo Beca</div>
            <div class="beca-name">Becas Juan Manuel Belgrano</div>
          </div>
          <div class="beca-card">
            <div class="beca-logo">Logo Beca</div>
            <div class="beca-name">Becas PICT</div>
          </div>
          <div class="beca-card">
            <div class="beca-logo">Logo Beca</div>
            <div class="beca-name">Becas Progresar</div>
          </div>
          <div class="beca-card">
            <div class="beca-logo">Logo Beca</div>
            <div class="beca-name">Becas postdoctorales CONICET</div>
          </div>
          <div class="beca-card">
            <div class="beca-logo">Logo Beca</div>
            <div class="beca-name">Becas Escolares BA</div>
          </div>
        </div>
      </section>
    </div>
  </main>

  <footer>
    <p>© 2025 ¿Estás Becado? - Todos los derechos reservados.</p>
    <div class="footer-socials">
      <a href="#">Acerca de nosotros</a>
      <i data-lucide="facebook"></i>
      <i data-lucide="x"></i>
      <i data-lucide="instagram"></i>
      <i data-lucide="linkedin"></i>
    </div>
  </footer>

  <script>
    lucide.createIcons();

    const themeToggleBtn = document.querySelector('.theme-toggle');
    const body = document.body;
    const themeKey = 'themePreference';

    function applyTheme(theme) {
      if (theme === 'dark') {
        body.classList.add('dark');
        themeToggleBtn.innerHTML = '<i data-lucide="sun"></i>';
      } else {
        body.classList.remove('dark');
        themeToggleBtn.innerHTML = '<i data-lucide="moon"></i>';
      }
      lucide.createIcons();
    }

    function toggleTheme() {
      const isDark = body.classList.toggle('dark');
      const newTheme = isDark ? 'dark' : 'light';
      localStorage.setItem(themeKey, newTheme);
      applyTheme(newTheme);
    }

    const savedTheme = localStorage.getItem(themeKey);
    applyTheme(savedTheme || 'light');

    const hamburgerButton = document.getElementById('hamburger-button');
    const navMenu = document.getElementById('nav-menu');

    hamburgerButton.addEventListener('click', () => {
      const isExpanded = navMenu.classList.toggle('active');
      hamburgerButton.setAttribute('aria-expanded', isExpanded);
      if (isExpanded) {
        hamburgerButton.innerHTML = '<i data-lucide="x"></i>';
      } else {
        hamburgerButton.innerHTML = '<i data-lucide="menu"></i>';
      }
      lucide.createIcons();
    });

    // Main search simulation
    const calificacionForm = document.getElementById('calificacion-form');
    if (calificacionForm) {
      const becasGrid = document.querySelector('.becas-grid');
      const mainLoader = document.querySelector('.left-section .loader-container');

      calificacionForm.addEventListener('submit', (event) => {
        event.preventDefault();
        
        becasGrid.classList.add('hidden');
        mainLoader.classList.remove('hidden');

        setTimeout(() => {
          becasGrid.classList.remove('hidden');
          mainLoader.classList.add('hidden');
          // alert('¡Búsqueda simulada! En una versión futura, los resultados se actualizarán aquí.');
        }, 2000);
      });
    }

    // Dependent dropdowns simulation
    const nivelSelect = document.getElementById('nivel');
    const provinciaSelect = document.getElementById('provincia');
    const institucionSelect = document.getElementById('institucion');
    const tipoSelect = document.getElementById('tipo');
    const campoSelect = document.getElementById('campo');

    const institucionLoader = document.getElementById('institucion-loader');
    const tipoLoader = document.getElementById('tipo-loader');
    const campoLoader = document.getElementById('campo-loader');

    const dependencyData = {
      provincias: {
        'ba': {
          instituciones: { 'uba': 'Universidad de Buenos Aires', 'unlp': 'Universidad Nacional de La Plata' },
          tipos: ['nacional', 'provincial_ba']
        },
        'cordoba': {
          instituciones: { 'unc': 'Universidad Nacional de Córdoba' },
          tipos: ['nacional', 'provincial_cordoba']
        }
      },
      niveles: {
        'secundaria': { campos: ['general'] },
        'licenciatura': { campos: ['ingenieria', 'ciencias_sociales', 'humanidades'] },
        'posgrado': { campos: ['investigacion', 'ciencias_aplicadas'] },
        'doctorado': { campos: ['investigacion_avanzada'] }
      },
      campos: {
        'general': 'Estudios Generales',
        'ingenieria': 'Ingeniería',
        'ciencias_sociales': 'Ciencias Sociales',
        'humanidades': 'Humanidades',
        'investigacion': 'Investigación',
        'ciencias_aplicadas': 'Ciencias Aplicadas',
        'investigacion_avanzada': 'Investigación Avanzada'
      },
      tipos: {
        'nacional': 'Nacional',
        'provincial_ba': 'Provincial (Buenos Aires)',
        'provincial_cordoba': 'Provincial (Córdoba)'
      }
    };

    function updateDropdown(selectElement, options, selectedValue) {
      const currentValue = selectElement.value;
      selectElement.innerHTML = '<option value="">Seleccione una opción</option>';
      let valueFound = false;
      for (const [value, text] of Object.entries(options)) {
        const option = document.createElement('option');
        option.value = value;
        option.textContent = text;
        if (value === currentValue) {
          option.selected = true;
          valueFound = true;
        }
        selectElement.appendChild(option);
      }
      selectElement.disabled = Object.keys(options).length === 0;
    }

    function onProvinciaChange() {
      institucionLoader.classList.remove('hidden');
      tipoLoader.classList.remove('hidden');
      institucionSelect.disabled = true;
      tipoSelect.disabled = true;

      setTimeout(() => {
        const provincia = provinciaSelect.value;
        const data = dependencyData.provincias[provincia] || {};
        
        const institucionOptions = data.instituciones || {};
        updateDropdown(institucionSelect, institucionOptions);

        const tipoOptions = (data.tipos || []).reduce((acc, tipoKey) => {
          acc[tipoKey] = dependencyData.tipos[tipoKey];
          return acc;
        }, {});
        updateDropdown(tipoSelect, tipoOptions);
        
        institucionLoader.classList.add('hidden');
        tipoLoader.classList.add('hidden');
      }, 500);
    }

    function onNivelChange() {
      campoLoader.classList.remove('hidden');
      campoSelect.disabled = true;

      setTimeout(() => {
        const nivel = nivelSelect.value;
        const data = dependencyData.niveles[nivel] || {};
        
        const campoOptions = (data.campos || []).reduce((acc, campoKey) => {
          acc[campoKey] = dependencyData.campos[campoKey];
          return acc;
        }, {});
        updateDropdown(campoSelect, campoOptions);

        campoLoader.classList.add('hidden');
      }, 500);
    }

    if (nivelSelect && provinciaSelect && institucionSelect && tipoSelect && campoSelect) {
      provinciaSelect.addEventListener('change', onProvinciaChange);
      nivelSelect.addEventListener('change', onNivelChange);

      // Initial population
      onProvinciaChange();
      onNivelChange();
    }
  </script>
</body>

</html>